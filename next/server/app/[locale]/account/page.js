(()=>{var e={};e.id=609,e.ids=[609],e.modules={382:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});var s=r(60687);r(43210);var t=r(29640),l=r(16189);function n({message:e,isVisible:a,onClose:r}){let n="en"===(0,l.usePathname)().split("/")[1]?"en":"ar";return a?(0,s.jsx)(t.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:"fixed top-[13vh] left-1/2 transform -translate-x-1/2 bg-[var(--accent-color)] text-[var(--text-white)] px-6 py-3 rounded-lg shadow-[var(--shadow-md)] max-w-md w-full text-center z-50",dir:"ar"===n?"rtl":"ltr",role:"alert","aria-live":"polite",children:e}):null}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10061:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Moham\\\\Desktop\\\\shatleh\\\\client\\\\src\\\\app\\\\[locale]\\\\account\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\account\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30596:(e,a,r)=>{Promise.resolve().then(r.bind(r,10061))},33873:e=>{"use strict";e.exports=require("path")},60452:(e,a,r)=>{Promise.resolve().then(r.bind(r,93528))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65266:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),t=r(48088),l=r(88170),n=r.n(l),i=r(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(a,o);let d={children:["",{children:["[locale]",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10061)),"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\account\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11434)),"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\account\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/[locale]/account/page",pathname:"/[locale]/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84027:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(62688).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},93528:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var s=r(60687),t=r(43210),l=r(77618),n=r(16189),i=r(85814),o=r.n(i),d=r(29640),c=r(41550),m=r(84027),p=r(97461),u=r.n(p);r(90895);var h=r(382),x=r(30474),v=r(69977);function b(){return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10vh)] bg-[var(--primary-bg)] px-4 sm:px-6 lg:px-8 py-16",children:(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-[var(--primary-bg)] rounded-3xl shadow-[var(--shadow-md)] p-8 w-full max-w-2xl",children:[(0,s.jsx)("div",{className:"h-8 bg-[var(--secondary-bg)] rounded w-1/3 mx-auto mb-8 animate-pulse"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[(0,s.jsx)("div",{className:"w-32 h-32 rounded-full bg-[var(--secondary-bg)] animate-pulse"}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-start",children:[(0,s.jsx)("div",{className:"h-6 bg-[var(--secondary-bg)] rounded w-3/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/2 mb-4 animate-pulse"}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center md:justify-start",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"})]})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"}),(0,s.jsx)("div",{className:"h-10 w-10 bg-[var(--secondary-bg)] rounded animate-pulse"})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"})]})]})})}function g(){let e=(0,l.c3)("profile"),a=(0,n.usePathname)();(0,n.useRouter)();let r="en"===a.split("/")[1]?"en":"ar",[i,p]=(0,t.useState)({first_name:"",last_name:"",email:"",phone_number:"",photo:null,remove_photo:!1}),[g,f]=(0,t.useState)({}),[y,j]=(0,t.useState)(!1),[N,_]=(0,t.useState)(""),[w,P]=(0,t.useState)([]),[k,C]=(0,t.useState)(null),q=(0,t.useRef)(null),[A,S]=(0,t.useState)(!0),R=e=>{let{name:a,value:r}=e.target;p(e=>({...e,[a]:r})),f(e=>({...e,[a]:void 0}))},E=async a=>{let r=parseInt(a.target.value);if(!r){f(a=>({...a,address:e("errors.addressRequired")}));return}try{await (0,v.y_)(r),P(w.map(e=>({...e,is_default:e.id===r}))),C(r),_(e("addressUpdated")),j(!0),f(e=>({...e,address:void 0}))}catch(a){console.error("Error setting default address:",a),f(a=>({...a,address:e("errors.addressChangeFailed")}))}},M=()=>{let a={};return i.first_name.trim()||(a.first_name=e("errors.firstNameRequired")),i.last_name.trim()||(a.last_name=e("errors.lastNameRequired")),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(a.email=e("errors.emailInvalid")):a.email=e("errors.emailRequired"),k||(a.address=e("errors.addressRequired")),i.photo instanceof File&&i.photo.size>2097152&&(a.photo=e("errors.photoSize")),f(a),0===Object.keys(a).length},z=async a=>{if(a.preventDefault(),!M())return;let r=new FormData;r.append("first_name",i.first_name),r.append("last_name",i.last_name),r.append("email",i.email),r.append("phone_number",i.phone_number),i.remove_photo&&r.append("remove_photo","true"),i.photo instanceof File&&r.append("photo",i.photo);try{let a=await (0,v.r7)(r);p({first_name:a.first_name,last_name:a.last_name,email:a.email,phone_number:a.phone_number,photo:a.photo,remove_photo:!1}),q.current=a.phone_number,_(e("successMessage")),j(!0),f({})}catch(r){let a=r instanceof Error?r.message:e("errors.submitFailed");try{let e=JSON.parse(a);f(e)}catch{_(a),j(!0)}}};return A?(0,s.jsx)(b,{}):(0,s.jsxs)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10vh)] bg-[var(--primary-bg)] px-4 sm:px-6 lg:px-8 py-16",dir:"ar"===r?"rtl":"ltr",children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-[var(--primary-bg)] rounded-3xl shadow-[var(--shadow-md)] p-8 w-full max-w-2xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8 text-[var(--text-primary)] text-center",children:e("title")}),(0,s.jsxs)("form",{onSubmit:z,children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-[var(--secondary-bg)]",children:(0,s.jsx)(x.default,{width:128,height:128,src:i.photo instanceof File?URL.createObjectURL(i.photo):i.photo?`http://127.0.0.1:8000${i.photo}`:"/placeholder.svg?height=128&width=128",alt:"Profile",className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-start",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-[var(--text-primary)]",children:[i.first_name," ",i.last_name]}),(0,s.jsx)("p",{className:"text-[var(--text-gray)]",children:i.email}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4 justify-center md:justify-start",children:[(0,s.jsxs)("label",{className:"inline-block",children:[(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 bg-[var(--accent-color)] text-[var(--text-white)] rounded-lg hover:bg-[var(--footer-accent)] transition-colors",onClick:()=>document.getElementById("photoInput")?.click(),children:e("uploadPhoto")}),(0,s.jsx)("input",{id:"photoInput",type:"file",className:"hidden",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let a=e.target.files[0];p(e=>({...e,photo:a,remove_photo:!1})),f(e=>({...e,photo:void 0}))}}})]}),(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 border border-[var(--accent-color)] text-[var(--accent-color)] rounded-lg hover:bg-[var(--focus-ring)] transition-colors",onClick:()=>p(e=>({...e,photo:null,remove_photo:!0})),children:e("deletePhoto")})]}),g.photo&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:g.photo})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("firstName")}),(0,s.jsx)("input",{type:"text",name:"first_name",value:i.first_name,onChange:R,placeholder:"ar"===r?"مثال: صادق":"Ex: Sadeq",className:`w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ${g.first_name?"border-red-500":"border-[var(--secondary-bg)]"}`,"aria-invalid":!!g.first_name,"aria-describedby":g.first_name?"firstName-error":void 0}),g.first_name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"firstName-error",children:g.first_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("lastName")}),(0,s.jsx)("input",{type:"text",name:"last_name",value:i.last_name,onChange:R,placeholder:"ar"===r?"مثال: محمد":"Ex: Mohamed",className:`w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ${g.last_name?"border-red-500":"border-[var(--secondary-bg)]"}`,"aria-invalid":!!g.last_name,"aria-describedby":g.last_name?"lastName-error":void 0}),g.last_name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"lastName-error",children:g.last_name})]})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("email")}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"email",name:"email",value:i.email,onChange:R,className:`w-full rounded-lg border px-4 py-3 pl-10 text-sm focus:outline-none focus:ring-2 transition-colors ${g.email?"border-red-500":"border-[var(--secondary-bg)]"}`,"aria-invalid":!!g.email,"aria-describedby":g.email?"email-error":void 0}),(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-gray)] w-5 h-5"})]}),g.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"email-error",children:g.email?Array.isArray(g.email)?g.email[0]:g.email:""})]}),(0,s.jsxs)("div",{dir:"ltr",children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("phoneNumber")}),(0,s.jsx)(u(),{country:"jo",value:q.current||"",onChange:e=>{q.current=e,p(a=>({...a,phone_number:e})),f(e=>({...e,phone_number:void 0}))},containerClass:"w-full",inputProps:{name:"phone_number",required:!0,className:`w-full pl-16 py-3 rounded-lg border text-sm focus:outline-none focus:ring-2 transition-colors ${g.phone_number?"border-red-500":"border-[var(--secondary-bg)]"}`},buttonStyle:{border:"none",backgroundColor:"transparent",padding:"8px",cursor:"pointer",left:"0",top:"0",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dropdownStyle:{zIndex:1e3,top:"100%",left:"0"}}),g.phone_number&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"phoneNumber-error",children:g.phone_number})]})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mb-6",children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("address")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("select",{name:"address",value:k||"",onChange:E,className:`w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ${g.address?"border-red-500":"border-[var(--secondary-bg)]"}`,"aria-invalid":!!g.address,"aria-describedby":g.address?"address-error":void 0,children:[(0,s.jsx)("option",{value:"",children:e("selectAddress")}),w.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.title," - ",e.city,", ",e.country_name||e.country_id]},e.id))]}),(0,s.jsx)(o(),{href:`/${r}/address`,children:(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"p-2 text-[var(--text-gray)] hover:text-[var(--accent-color)]",title:e("manageAddresses"),children:(0,s.jsx)(m.A,{className:"w-5 h-5"})})})]}),g.address&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"address-error",children:g.address})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"flex justify-end gap-4",children:[(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 border border-[var(--accent-color)] text-[var(--accent-color)] rounded-lg hover:bg-[var(--focus-ring)] transition-colors",onClick:async()=>{try{let e=await (0,v.eO)();p({first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,photo:e.photo,remove_photo:!1}),q.current=e.phone_number,f({})}catch(a){console.error("Error fetching profile:",a),_(e("errors.fetchFailed")),j(!0)}},children:e("cancel")}),(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-[var(--accent-color)] text-[var(--text-white)] rounded-lg hover:bg-[var(--footer-accent)] transition-colors",children:e("saveChanges")})]})]})]}),(0,s.jsx)(h.A,{message:N,isVisible:y,onClose:()=>j(!1)})]})}}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[825,485,640,523,932],()=>r(65266));module.exports=s})();