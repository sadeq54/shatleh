(()=>{var e={};e.id=563,e.ids=[563],e.modules={382:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(60687);s(43210);var i=s(29640),a=s(16189);function n({message:e,isVisible:t,onClose:s}){let n="en"===(0,a.usePathname)().split("/")[1]?"en":"ar";return t?(0,r.jsx)(i.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:"fixed top-[13vh] left-1/2 transform -translate-x-1/2 bg-[var(--accent-color)] text-[var(--text-white)] px-6 py-3 rounded-lg shadow-[var(--shadow-md)] max-w-md w-full text-center z-50",dir:"ar"===n?"rtl":"ltr",role:"alert","aria-live":"polite",children:e}):null}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14952:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},39192:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(60687),i=s(85814),a=s.n(i),n=s(47033),l=s(14952),o=s(77618),d=s(16189),c=s(43210);let x=(0,c.memo)(function({pageName:e,product:t}){let s=(0,o.c3)(""),i=(0,d.usePathname)(),x=i.split("/")[1]||"ar",m=s(`pages.${e.toLocaleLowerCase()}`);return"ar"===x?(0,r.jsxs)("div",{className:"flex items-center text-sm mb-2",children:[(0,r.jsx)(a(),{href:"/",className:"text-[#025162]",children:s("home.title")}),(0,r.jsx)(n.A,{className:"h-4 w-4 mx-1 text-[#80ce97]"}),(0,r.jsx)(a(),{href:`/${x}/${e}`,className:"text-[#025162]",children:(0,r.jsx)("span",{className:"text-[#025162]",children:m})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"h-4 w-4 mx-1 text-[#80ce97]"}),(0,r.jsx)("span",{className:"text-[#025162]",children:t})]})]}):(0,r.jsxs)("div",{className:"flex items-center text-sm mb-2",children:[(0,r.jsx)(a(),{href:"/",className:"text-[#025162]",children:s("home.title")}),i.split("/").map((e,t)=>1!==t&&0!==t&&isNaN(parseInt(e))?(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mx-1 text-[#80ce97]"}),(0,r.jsx)(a(),{href:`/${e}`,className:"text-[#025162]",children:(0,r.jsx)("span",{className:"text-[#025162]",children:e})})]},e):null),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mx-1 text-[#80ce97]"}),(0,r.jsx)("span",{className:"text-[#025162]",children:t})]})]})})},47033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},54765:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Moham\\\\Desktop\\\\shatleh\\\\client\\\\src\\\\app\\\\[locale]\\\\orders\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\orders\\page.tsx","default")},56326:(e,t,s)=>{Promise.resolve().then(s.bind(s,54765))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67444:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(65239),i=s(48088),a=s(88170),n=s.n(a),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["[locale]",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,54765)),"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11434)),"C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\Moham\\Desktop\\shatleh\\client\\src\\app\\[locale]\\orders\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/[locale]/orders/page",pathname:"/[locale]/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},74478:(e,t,s)=>{Promise.resolve().then(s.bind(s,81196))},81196:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(60687),i=s(43210),a=s(77618),n=s(16189),l=s(29640),o=s(88920),d=s(30474),c=s(382);function x({isOpen:e,onClose:t,onConfirm:s,orderCode:i,locale:n}){let d=(0,a.c3)("orders");return(0,r.jsx)(o.N,{children:e&&(0,r.jsxs)(l.P.div,{className:"fixed inset-0 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,r.jsx)(l.P.div,{className:"absolute inset-0 bg-black/50",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),(0,r.jsxs)(l.P.div,{className:"bg-white rounded-lg p-6 w-full max-w-sm relative shadow-lg",initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},dir:"ar"===n?"rtl":"ltr",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:d("confirmCancelTitle")}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:d("confirmCancelMessage",{orderCode:i})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",onClick:t,children:d("cancelButton")}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",onClick:s,children:d("confirmButton")})]})]})]})})}var m=s(39192),h=s(69977);function p(){let e=(0,a.c3)("orders"),t=(0,n.usePathname)(),s=(0,n.useRouter)(),p="en"===t.split("/")[1]?"en":"ar",[u,g]=(0,i.useState)("all"),[f,y]=(0,i.useState)(null),[j,v]=(0,i.useState)(!1),[w,N]=(0,i.useState)(""),[b,P]=(0,i.useState)([]),[k,C]=(0,i.useState)(!0),[$,A]=(0,i.useState)(null),[S,_]=(0,i.useState)(!1),[E,M]=(0,i.useState)(null),L=b.filter(e=>"all"===u||e.status===u),H=e=>{y(f===e?null:e)},R=(e,t)=>{M({id:e,orderCode:t}),_(!0)},T=async()=>{if(E){_(!1),C(!0);try{await (0,h.N4)(E.id,p),N(e("cancelSuccess")),v(!0),P(e=>e.map(e=>e.id.toString()===E.id?{...e,status:"cancelled"}:e))}catch(t){N(e("cancelError")||"Failed to cancel order"),v(!0),console.error("Cancel order error:",t)}finally{C(!1),P(await (0,h.Gb)(p)),M(null)}}};return k?(0,r.jsx)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col",dir:"ar"===p?"rtl":"ltr",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:[(0,r.jsxs)("div",{className:"w-full rounded-lg",children:[(0,r.jsx)(l.P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-2xl font-semibold text-green-700 mb-4",children:e("title")}),(0,r.jsx)(m.A,{pageName:"orders"})]}),(0,r.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"bg-green-100 rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]},t))})]})}):$?(0,r.jsx)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col",dir:"ar"===p?"rtl":"ltr",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:[(0,r.jsxs)("div",{className:"w-full rounded-lg",children:[(0,r.jsx)(l.P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-2xl font-semibold text-green-700 mb-4",children:e("title")}),(0,r.jsx)(m.A,{pageName:"orders"})]}),(0,r.jsxs)("div",{className:"text-center text-red-500",children:[(0,r.jsx)("p",{children:$}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>s.push(`/${p}/login`),children:e("goToLogin")})]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col overflow-auto",dir:"ar"===p?"rtl":"ltr",children:[(0,r.jsxs)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:[(0,r.jsx)("div",{className:"flex mr-5  mb-4",children:(0,r.jsx)(m.A,{pageName:"orders"})}),(0,r.jsxs)("div",{className:"w-full rounded-lg",children:[(0,r.jsx)(l.P.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},className:"text-2xl font-semibold text-green-700 mb-4",children:e("title")}),(0,r.jsxs)(l.P.div,{className:"mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,ease:[.4,0,.2,1],delay:.1},children:[(0,r.jsx)("div",{className:"sm:hidden",children:(0,r.jsx)(l.P.select,{value:u,onChange:e=>g(e.target.value),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-green-200 rounded-full focus:outline-none focus:ring-2 focus:ring-green-300 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1],delay:.15},dir:"ar"===p?"rtl":"ltr",children:["all","pending","inProgress","delivered","cancelled"].map(t=>(0,r.jsx)("option",{value:t,children:e(t)},t))})}),(0,r.jsx)("div",{className:"hidden sm:flex flex-wrap gap-2 justify-center md:justify-start",children:["all","pending","inProgress","delivered","cancelled"].map((t,s)=>(0,r.jsx)(l.P.button,{whileHover:{scale:1.05,y:-2,transition:{duration:.2,ease:[.4,0,.2,1]}},whileTap:{scale:.95,transition:{duration:.2,ease:[.4,0,.2,1]}},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${u===t?"bg-white text-black border border-green-200 shadow-sm":"bg-transparent text-gray-600 hover:text-black border border-transparent hover:bg-green-50"}`,onClick:()=>g(t),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,ease:[.4,0,.2,1],delay:.1+.03*s},"aria-current":u===t?"true":"false",children:e(t)},t))})]})]}),(0,r.jsx)(l.P.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,ease:[.4,0,.2,1],delay:.2},children:0===L.length?(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[(0,r.jsx)("p",{children:e("noOrders")}),(0,r.jsx)(l.P.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>s.push(`/${p}/products`),children:e("shopNow")})]}):(0,r.jsx)(o.N,{children:L.map((t,s)=>(0,r.jsxs)(l.P.div,{className:"bg-green-100 rounded-lg p-4 shadow-sm overflow-hidden",initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.4,0,.2,1],delay:.05*s},layout:!0,children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-lg font-medium",children:[e("order")," #",t.order_code]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:new Date(t.order_date).toLocaleDateString(p,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)("div",{className:"flex items-center mt-2 md:mt-0",children:(0,r.jsx)(l.P.div,{whileHover:{scale:1.05,y:-2,transition:{duration:.2,ease:[.4,0,.2,1]}},className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold text-white ${"delivered"===t.status?"bg-green-500":"cancelled"===t.status?"bg-red-500":"pending"===t.status?"bg-yellow-500":"bg-blue-500"}`,children:e("delivered"===t.status?"completed":t.status)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-white p-2 rounded-full mr-3",children:(0,r.jsxs)("svg",{className:"h-5 w-5 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),(0,r.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"font-medium",children:["$",t.total_price]})})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-white p-2 rounded-full mr-3",children:(0,r.jsxs)("svg",{className:"h-5 w-5 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),(0,r.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e("items")}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[t.products.length,"x"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,r.jsxs)(l.P.button,{whileHover:{scale:1.05,y:-2,transition:{duration:.2,ease:[.4,0,.2,1]}},whileTap:{scale:.95,transition:{duration:.2,ease:[.4,0,.2,1]}},className:"text-green-700 hover:text-green-800 hover:bg-green-200 px-4 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>H(t.id.toString()),"aria-expanded":f===t.id.toString(),"aria-controls":`order-details-${t.id}`,children:[(0,r.jsx)("span",{className:"inline-flex",children:f===t.id.toString()?e("hideDetails"):e("viewDetails")}),(0,r.jsx)("svg",{className:`ml-1 h-4 w-4 transition-transform ${f===t.id.toString()?"rotate-180":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),"pending"===t.status&&(0,r.jsx)(l.P.button,{whileHover:{scale:1.05,y:-2,transition:{duration:.2,ease:[.4,0,.2,1]}},whileTap:{scale:.95,transition:{duration:.2,ease:[.4,0,.2,1]}},className:"text-red-500 hover:text-red-600 hover:bg-red-100 px-3 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>R(t.id.toString(),t.order_code),children:(0,r.jsx)("span",{className:"inline-flex",children:e("cancelOrder")})}),(0,r.jsxs)("svg",{className:"h-5 w-5 text-gray-400 ml-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})]})]}),(0,r.jsx)(o.N,{mode:"wait",children:f===t.id.toString()&&(0,r.jsxs)(l.P.div,{className:"mt-4 bg-white rounded-lg p-4 overflow-hidden",initial:{opacity:0,maxHeight:0},animate:{opacity:1,maxHeight:1e3},exit:{opacity:0,maxHeight:0},transition:{duration:.3,ease:[.4,0,.2,1],opacity:{duration:.2}},id:`order-details-${t.id}`,children:[t.products.map((s,i)=>(0,r.jsxs)(l.P.div,{className:"flex justify-between items-center py-3 border-b last:border-0",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,ease:[.4,0,.2,1],delay:.03*i},children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-green-50 p-2 rounded-md mr-3",children:(0,r.jsx)(d.default,{src:s.image?`http://127.0.0.1:8000${s.image}`:"/placeholder.svg",alt:s.name[p],width:40,height:40,className:"object-cover",priority:!0})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm",children:s.name[p]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[e("quantity"),": ",s.quantity]})]})]}),(0,r.jsxs)("p",{className:"font-medium",children:["$",s.price]})]},`${t.id}-${s.id}-${i}`)),t.address&&(0,r.jsxs)(l.P.div,{className:"mt-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,ease:[.4,0,.2,1],delay:.03*t.products.length},children:[(0,r.jsx)("p",{className:"font-medium",children:e("shippingAddress")}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[t.address.title,", ",t.address.city,", ",t.address.address_line]})]})]},t.id)})]},t.id))})})]}),(0,r.jsx)(c.A,{message:w,isVisible:j,onClose:()=>v(!1)}),(0,r.jsx)(x,{isOpen:S,onClose:()=>{_(!1),M(null)},onConfirm:T,orderCode:E?.orderCode||"",locale:p})]})}},88920:(e,t,s)=>{"use strict";s.d(t,{N:()=>f});var r=s(60687),i=s(43210),a=s(12157),n=s(72789),l=s(15124),o=s(21279),d=s(32582);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:t,anchorX:s}){let a=(0,i.useId)(),n=(0,i.useRef)(null),l=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,i.useContext)(d.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:r,top:i,left:d,right:c}=l.current;if(t||!n.current||!e||!r)return;let x="left"===s?`left: ${d}`:`right: ${c}`;n.current.dataset.motionPopId=a;let m=document.createElement("style");return o&&(m.nonce=o),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${x}px !important;
            top: ${i}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[t]),(0,r.jsx)(c,{isPresent:t,childRef:n,sizeRef:l,children:i.cloneElement(e,{ref:n})})}let m=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:c,anchorX:m})=>{let p=(0,n.M)(h),u=(0,i.useId)(),g=(0,i.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},[p,a]),f=(0,i.useMemo)(()=>({id:u,initial:t,isPresent:s,custom:l,onExitComplete:g,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),g]:[s,g]);return(0,i.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),i.useEffect(()=>{s||p.size||!a||a()},[s]),"popLayout"===c&&(e=(0,r.jsx)(x,{isPresent:s,anchorX:m,children:e})),(0,r.jsx)(o.t.Provider,{value:f,children:e})};function h(){return new Map}var p=s(86044);let u=e=>e.key||"";function g(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let f=({children:e,custom:t,initial:s=!0,onExitComplete:o,presenceAffectsLayout:d=!0,mode:c="sync",propagate:x=!1,anchorX:h="left"})=>{let[f,y]=(0,p.xQ)(x),j=(0,i.useMemo)(()=>g(e),[e]),v=x&&!f?[]:j.map(u),w=(0,i.useRef)(!0),N=(0,i.useRef)(j),b=(0,n.M)(()=>new Map),[P,k]=(0,i.useState)(j),[C,$]=(0,i.useState)(j);(0,l.E)(()=>{w.current=!1,N.current=j;for(let e=0;e<C.length;e++){let t=u(C[e]);v.includes(t)?b.delete(t):!0!==b.get(t)&&b.set(t,!1)}},[C,v.length,v.join("-")]);let A=[];if(j!==P){let e=[...j];for(let t=0;t<C.length;t++){let s=C[t],r=u(s);v.includes(r)||(e.splice(t,0,s),A.push(s))}return"wait"===c&&A.length&&(e=A),$(g(e)),k(j),null}let{forceRender:S}=(0,i.useContext)(a.L);return(0,r.jsx)(r.Fragment,{children:C.map(e=>{let i=u(e),a=(!x||!!f)&&(j===C||v.includes(i));return(0,r.jsx)(m,{isPresent:a,initial:(!w.current||!!s)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,onExitComplete:a?void 0:()=>{if(!b.has(i))return;b.set(i,!0);let e=!0;b.forEach(t=>{t||(e=!1)}),e&&(S?.(),$(N.current),x&&y?.(),o&&o())},anchorX:h,children:e},i)})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[825,485,640,932],()=>s(67444));module.exports=r})();