"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6720],{6720:(t,a,e)=>{e.d(a,{E1:()=>m,VY:()=>L,N4:()=>G,Pt:()=>J,sX:()=>_,vh:()=>A,ab:()=>j,ls:()=>g,eN:()=>d,CF:()=>v,l4:()=>P,Fy:()=>k,jE:()=>h,w6:()=>I,Gb:()=>N,NW:()=>B,Lw:()=>C,eO:()=>f,w7:()=>q,jg:()=>T,Qq:()=>l,Li:()=>b,c4:()=>n,iD:()=>i,PZ:()=>p,kz:()=>s,$P:()=>u,y_:()=>E,zi:()=>O,$8:()=>F,dC:()=>z,yU:()=>w,V2:()=>S,r7:()=>y});let o=[{id:1,name_en:"Sample Product",name_ar:"منتج عينة",price:"19.99",image:"/images/sample.jpg",description_en:"A sample product description",description_ar:"وصف منتج عينة",availability:!0,sold_quantity:20,categories:[{id:1,name_en:"Electronics",name_ar:"إلكترونيات",parent_id:null},{id:2,name_en:"Mobile Phones",name_ar:"هواتف محمولة",parent_id:1}],rating:4.5}],r="http://127.0.0.1:8000",n=()=>localStorage.getItem("token"),c=async t=>{if(!t.ok){let a={};try{a=await t.json()}catch(t){}throw console.error("API Error:",{status:t.status,statusText:t.statusText,errorData:a}),Error(a.message||a.error||JSON.stringify(a.errors)||"HTTP error ".concat(t.status))}return t.json()},i=async t=>{try{let a=await fetch("".concat(r,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}),e=await c(a);return localStorage.setItem("token",e.token),localStorage.setItem("userId",e.user.id),e}catch(t){throw Error(t instanceof Error?t.message:"Login failed")}},s=async t=>{try{let a=await fetch("".concat(r,"/api/register"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}),e=await c(a);return localStorage.setItem("token",e.token),localStorage.setItem("userId",e.user.id),e}catch(t){throw Error(t instanceof Error?t.message:"Registration failed")}},p=async t=>{try{let a=await fetch("".concat(r,"/api/logout"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}});await c(a),localStorage.removeItem("token"),localStorage.removeItem("userId")}catch(t){throw Error(t instanceof Error?t.message:"Logout failed")}},h=async()=>{try{let t=await fetch("".concat(r,"/api/categories"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return(await c(t)).data.map(t=>({id:t.id,name:{en:t.name_en,ar:t.name_ar},subcategories:t.subcategories.map(t=>({id:t.id,name:{en:t.name_en,ar:t.name_ar},image:t.name_en,subcategories:[]})),image:t.subcategories.length>0?t.subcategories[0].name_en:""}))}catch(t){throw console.error("Failed to fetch categories:",t),Error(t instanceof Error?t.message:"Failed to fetch categories")}},d=async t=>{try{let a=t&&t.length>0?"?category_ids=".concat(t.join(",")):"",e=await fetch("".concat(r,"/api/all_products").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return(await c(e)).data}catch(t){return console.error("Error fetching products:",t),o.map(t=>({...t,price:t.price.toString(),availability:!!t.availability,categories:t.categories?t.categories.map(t=>({id:t.id,name_en:t.name_en||"",name_ar:t.name_ar||"",parent_id:null})):[],rating:t.rating||void 0}))}},l=async()=>{try{let t=await fetch("".concat(r,"/api/top_sellers"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},next:{revalidate:86400}});return(await c(t)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch top products")}},u=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";try{let e=await fetch("".concat(r,"/api/search?q=").concat(encodeURIComponent(t),"&type=").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},next:{revalidate:30}});return await c(e)}catch(t){throw console.error("Error performing search:",t),Error(t instanceof Error?t.message:"Search failed")}},f=async()=>{let t=n();if(!t)throw Error("No authentication token found");try{let a=await fetch("".concat(r,"/api/profile"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}});return(await c(a)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch profile")}},y=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/profile"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:t});return(await c(e)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to update profile")}},g=async()=>{let t=n();if(!t)throw Error("No authentication token found");try{let a=await fetch("".concat(r,"/api/addresses"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}});return(await c(a)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch addresses")}},m=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/addresses"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});return(await c(e)).address}catch(t){throw Error(t instanceof Error?t.message:"Failed to add address")}},w=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/addresses/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)});return(await c(o)).address}catch(t){throw Error(t instanceof Error?t.message:"Failed to update address")}},E=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/addresses/").concat(t,"/set-default"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}});await c(e)}catch(t){throw Error(t instanceof Error?t.message:"Failed to set default address")}},j=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/addresses/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}});await c(e)}catch(t){throw Error(t instanceof Error?t.message:"Failed to delete address")}},T=async()=>{try{let t=await fetch("".concat(r,"/api/services"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return(await c(t)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch services")}},A=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=new FormData;e.append("service_id",t.service_id.toString()),e.append("address_id",t.address_id.toString()),e.append("customer_id",t.customer_id),e.append("details",t.details),t.image&&e.append("image",t.image);let o=await fetch("".concat(r,"/api/service-requests"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:e});return c(o)}catch(t){throw Error(t instanceof Error?t.message:"Failed to create service request")}},k=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/cart"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e),"Accept-Language":a},body:JSON.stringify({customer_id:t})});return(await c(o)).data.map(t=>({...t,price:t.price.toString()}))}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch cart")}},S=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/cart/update"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e),"Accept-Language":a},body:JSON.stringify(t)});return c(o)}catch(t){throw Error(t instanceof Error?t.message:"Failed to update cart")}},_=async(t,a,e)=>{if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/cart/clear"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e),"Accept-Language":a},body:JSON.stringify({customer_id:t})});return c(o)}catch(t){throw Error(t instanceof Error?t.message:"Failed to clear cart")}},C=async t=>{try{let a=await fetch("".concat(r,"/api/products/").concat(t,"/reviews"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),e=await c(a);return{reviews:e.data.reviews,averageRating:e.data.average_rating}}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch product reviews")}},N=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/orders"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a),"Accept-Language":t}});return(await c(e)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch orders")}},b=async t=>{let a=n();if(!a)return[];try{let e=await fetch("".concat(r,"/api/orders/unrated"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a),"Accept-Language":t}});return(await c(e)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch unrated orders")}},F=async(t,a,e)=>{let o=n();if(!o)throw Error("No authentication token found");try{let n=await fetch("".concat(r,"/api/orders/").concat(t,"/ratings"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(o),"Accept-Language":e},body:JSON.stringify({ratings:a})});await c(n)}catch(t){throw Error(t instanceof Error?t.message:"Failed to submit ratings")}},O=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/orders/").concat(t,"/skip-rating"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e),"Accept-Language":a}});await c(o)}catch(t){throw Error(t instanceof Error?t.message:"Failed to skip rating")}},v=async()=>{try{let t=await fetch("".concat(r,"/api/blog"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return await c(t)}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch blog posts")}},P=async()=>{let t=n();if(!t)return[];try{let a=await fetch("".concat(r,"/api/bookmarks"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}});return await c(a)}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch bookmarked posts")}},z=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/blog/").concat(t,"/bookmark"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)}});return(await c(e)).bookmarked}catch(t){throw Error(t instanceof Error?t.message:"Failed to toggle bookmark")}},B=async t=>{try{let a=await fetch("".concat(r,"/api/categories"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":t}});return(await c(a)).data.map(t=>({id:t.id,name:{en:t.name_en,ar:t.name_ar},selected:!1}))}catch(t){throw console.error("Failed to fetch post categories:",t),Error(t instanceof Error?t.message:"Failed to fetch post categories")}},G=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat("http://127.0.0.1:8000","/api/orders/").concat(t,"/cancel"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e),"Accept-Language":a}});if(!o.ok){let t=await o.json();throw Error(t.message||"Failed to cancel order")}}catch(t){throw Error(t instanceof Error?t.message:"Failed to cancel order")}},I=async()=>{try{let t=await fetch("".concat(r,"/api/coupons"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return(await c(t)).data}catch(t){return console.error("Failed to fetch coupons:",t),[]}},L=async(t,a)=>{let e=n();if(!e)throw Error("No authentication token found");try{let o=await fetch("".concat(r,"/api/coupons/apply"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({code:t,country_id:a})});return await c(o)}catch(t){throw Error(t instanceof Error?t.message:"Failed to apply coupon")}},J=async(t,a)=>{if(!a)throw Error("No authentication token found");console.log("Checkout token:",a);try{let e=await fetch("".concat(r,"/api/checkout"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});if(401===e.status)throw localStorage.removeItem("token"),localStorage.removeItem("userId"),Error("Session expired. Please log in again.");return await c(e)}catch(t){throw console.error("Checkout error:",t),Error(t instanceof Error?t.message:"Checkout failed")}},q=async t=>{let a=n();if(!a)throw Error("No authentication token found");try{let e=await fetch("".concat(r,"/api/service-requests"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a),"Accept-Language":t}});return(await c(e)).data}catch(t){throw Error(t instanceof Error?t.message:"Failed to fetch service requests")}}}}]);