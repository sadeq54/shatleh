(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4609],{381:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1264:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3032:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});var s=r(5155),t=r(2115),l=r(4105),i=r(5695);function n(e){let{message:a,isVisible:r,onClose:n}=e,o="en"===(0,i.usePathname)().split("/")[1]?"en":"ar";return((0,t.useEffect)(()=>{if(r){let e=setTimeout(()=>{n()},3e3);return()=>clearTimeout(e)}},[r,n]),r)?(0,s.jsx)(l.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:"fixed top-[13vh] left-1/2 transform -translate-x-1/2 bg-[var(--accent-color)] text-[var(--text-white)] px-6 py-3 rounded-lg shadow-[var(--shadow-md)] max-w-md w-full text-center z-50",dir:"ar"===o?"rtl":"ltr",role:"alert","aria-live":"polite",children:a}):null}},6812:(e,a,r)=>{Promise.resolve().then(r.bind(r,8026))},8026:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var s=r(5155),t=r(2115),l=r(7652),i=r(5695),n=r(6874),o=r.n(n),d=r(4105),c=r(1264),m=r(381),u=r(9365),h=r.n(u);r(133);var p=r(3032),x=r(6766),v=r(6720);function b(){return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10vh)] bg-[var(--primary-bg)] px-4 sm:px-6 lg:px-8 py-16",children:(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-[var(--primary-bg)] rounded-3xl shadow-[var(--shadow-md)] p-8 w-full max-w-2xl",children:[(0,s.jsx)("div",{className:"h-8 bg-[var(--secondary-bg)] rounded w-1/3 mx-auto mb-8 animate-pulse"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[(0,s.jsx)("div",{className:"w-32 h-32 rounded-full bg-[var(--secondary-bg)] animate-pulse"}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-start",children:[(0,s.jsx)("div",{className:"h-6 bg-[var(--secondary-bg)] rounded w-3/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/2 mb-4 animate-pulse"}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center md:justify-start",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"})]})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"}),(0,s.jsx)("div",{className:"h-10 w-10 bg-[var(--secondary-bg)] rounded animate-pulse"})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-[var(--secondary-bg)] rounded w-1/4 mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-full animate-pulse"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-[var(--secondary-bg)] rounded w-24 animate-pulse"})]})]})})}function g(){let e=(0,l.c3)("profile"),a=(0,i.usePathname)(),r=(0,i.useRouter)(),n="en"===a.split("/")[1]?"en":"ar",[u,g]=(0,t.useState)({first_name:"",last_name:"",email:"",phone_number:"",photo:null,remove_photo:!1}),[f,y]=(0,t.useState)({}),[j,N]=(0,t.useState)(!1),[w,_]=(0,t.useState)(""),[k,C]=(0,t.useState)([]),[P,A]=(0,t.useState)(null),E=(0,t.useRef)(null),[S,R]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let a=localStorage.getItem("token"),s=localStorage.getItem("userId");if(!a||!s){r.push("/".concat(n,"/login?redirect=/account"));return}(async()=>{try{R(!0);let[e,a]=await Promise.all([(0,v.eO)(),(0,v.ls)()]);g({first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,photo:e.photo,remove_photo:!1}),E.current=e.phone_number,C(a);let r=a.find(e=>e.is_default);A(r?r.id:null)}catch(a){console.error("Error fetching data:",a),_(e("errors.fetchFailed")),N(!0)}finally{R(!1)}})()},[n,r,e]);let I=e=>{let{name:a,value:r}=e.target;g(e=>({...e,[a]:r})),y(e=>({...e,[a]:void 0}))},q=async a=>{let r=parseInt(a.target.value);if(!r){y(a=>({...a,address:e("errors.addressRequired")}));return}try{await (0,v.y_)(r),C(k.map(e=>({...e,is_default:e.id===r}))),A(r),_(e("addressUpdated")),N(!0),y(e=>({...e,address:void 0}))}catch(a){console.error("Error setting default address:",a),y(a=>({...a,address:e("errors.addressChangeFailed")}))}},F=()=>{let a={};return u.first_name.trim()||(a.first_name=e("errors.firstNameRequired")),u.last_name.trim()||(a.last_name=e("errors.lastNameRequired")),u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(a.email=e("errors.emailInvalid")):a.email=e("errors.emailRequired"),P||(a.address=e("errors.addressRequired")),u.photo instanceof File&&u.photo.size>2097152&&(a.photo=e("errors.photoSize")),y(a),0===Object.keys(a).length},O=async a=>{if(a.preventDefault(),!F())return;let r=new FormData;r.append("first_name",u.first_name),r.append("last_name",u.last_name),r.append("email",u.email),r.append("phone_number",u.phone_number),u.remove_photo&&r.append("remove_photo","true"),u.photo instanceof File&&r.append("photo",u.photo);try{let a=await (0,v.r7)(r);g({first_name:a.first_name,last_name:a.last_name,email:a.email,phone_number:a.phone_number,photo:a.photo,remove_photo:!1}),E.current=a.phone_number,_(e("successMessage")),N(!0),y({})}catch(r){let a=r instanceof Error?r.message:e("errors.submitFailed");try{let e=JSON.parse(a);y(e)}catch(e){_(a),N(!0)}}};return S?(0,s.jsx)(b,{}):(0,s.jsxs)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10vh)] bg-[var(--primary-bg)] px-4 sm:px-6 lg:px-8 py-16",dir:"ar"===n?"rtl":"ltr",children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-[var(--primary-bg)] rounded-3xl shadow-[var(--shadow-md)] p-8 w-full max-w-2xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8 text-[var(--text-primary)] text-center",children:e("title")}),(0,s.jsxs)("form",{onSubmit:O,children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-[var(--secondary-bg)]",children:(0,s.jsx)(x.default,{width:128,height:128,src:u.photo instanceof File?URL.createObjectURL(u.photo):u.photo?"".concat("http://127.0.0.1:8000").concat(u.photo):"/placeholder.svg?height=128&width=128",alt:"Profile",className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-start",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-[var(--text-primary)]",children:[u.first_name," ",u.last_name]}),(0,s.jsx)("p",{className:"text-[var(--text-gray)]",children:u.email}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4 justify-center md:justify-start",children:[(0,s.jsxs)("label",{className:"inline-block",children:[(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 bg-[var(--accent-color)] text-[var(--text-white)] rounded-lg hover:bg-[var(--footer-accent)] transition-colors",onClick:()=>{var e;return null===(e=document.getElementById("photoInput"))||void 0===e?void 0:e.click()},children:e("uploadPhoto")}),(0,s.jsx)("input",{id:"photoInput",type:"file",className:"hidden",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let a=e.target.files[0];g(e=>({...e,photo:a,remove_photo:!1})),y(e=>({...e,photo:void 0}))}}})]}),(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 border border-[var(--accent-color)] text-[var(--accent-color)] rounded-lg hover:bg-[var(--focus-ring)] transition-colors",onClick:()=>g(e=>({...e,photo:null,remove_photo:!0})),children:e("deletePhoto")})]}),f.photo&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:f.photo})]})]}),(0,s.jsx)("hr",{className:"my-6 border-[var(--secondary-bg)]"}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("firstName")}),(0,s.jsx)("input",{type:"text",name:"first_name",value:u.first_name,onChange:I,placeholder:"ar"===n?"مثال: صادق":"Ex: Sadeq",className:"w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(f.first_name?"border-red-500":"border-[var(--secondary-bg)]"),"aria-invalid":!!f.first_name,"aria-describedby":f.first_name?"firstName-error":void 0}),f.first_name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"firstName-error",children:f.first_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("lastName")}),(0,s.jsx)("input",{type:"text",name:"last_name",value:u.last_name,onChange:I,placeholder:"ar"===n?"مثال: محمد":"Ex: Mohamed",className:"w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(f.last_name?"border-red-500":"border-[var(--secondary-bg)]"),"aria-invalid":!!f.last_name,"aria-describedby":f.last_name?"lastName-error":void 0}),f.last_name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"lastName-error",children:f.last_name})]})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("email")}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"email",name:"email",value:u.email,onChange:I,className:"w-full rounded-lg border px-4 py-3 pl-10 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(f.email?"border-red-500":"border-[var(--secondary-bg)]"),"aria-invalid":!!f.email,"aria-describedby":f.email?"email-error":void 0}),(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-gray)] w-5 h-5"})]}),f.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"email-error",children:f.email?Array.isArray(f.email)?f.email[0]:f.email:""})]}),(0,s.jsxs)("div",{dir:"ltr",children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("phoneNumber")}),(0,s.jsx)(h(),{country:"jo",value:E.current||"",onChange:e=>{E.current=e,g(a=>({...a,phone_number:e})),y(e=>({...e,phone_number:void 0}))},containerClass:"w-full",inputProps:{name:"phone_number",required:!0,className:"w-full pl-16 py-3 rounded-lg border text-sm focus:outline-none focus:ring-2 transition-colors ".concat(f.phone_number?"border-red-500":"border-[var(--secondary-bg)]")},buttonStyle:{border:"none",backgroundColor:"transparent",padding:"8px",cursor:"pointer",left:"0",top:"0",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dropdownStyle:{zIndex:1e3,top:"100%",left:"0"}}),f.phone_number&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"phoneNumber-error",children:f.phone_number})]})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mb-6",children:[(0,s.jsx)("label",{className:"block mb-2 font-medium text-[var(--text-primary)]",children:e("address")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("select",{name:"address",value:P||"",onChange:q,className:"w-full rounded-lg border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(f.address?"border-red-500":"border-[var(--secondary-bg)]"),"aria-invalid":!!f.address,"aria-describedby":f.address?"address-error":void 0,children:[(0,s.jsx)("option",{value:"",children:e("selectAddress")}),k.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.title," - ",e.city,", ",e.country_name||e.country_id]},e.id))]}),(0,s.jsx)(o(),{href:"/".concat(n,"/address"),children:(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"p-2 text-[var(--text-gray)] hover:text-[var(--accent-color)]",title:e("manageAddresses"),children:(0,s.jsx)(m.A,{className:"w-5 h-5"})})})]}),f.address&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",id:"address-error",children:f.address})]}),(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"flex justify-end gap-4",children:[(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",className:"px-4 py-2 border border-[var(--accent-color)] text-[var(--accent-color)] rounded-lg hover:bg-[var(--focus-ring)] transition-colors",onClick:async()=>{try{let e=await (0,v.eO)();g({first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,photo:e.photo,remove_photo:!1}),E.current=e.phone_number,y({})}catch(a){console.error("Error fetching profile:",a),_(e("errors.fetchFailed")),N(!0)}},children:e("cancel")}),(0,s.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-[var(--accent-color)] text-[var(--text-white)] rounded-lg hover:bg-[var(--footer-accent)] transition-colors",children:e("saveChanges")})]})]})]}),(0,s.jsx)(p.A,{message:w,isVisible:j,onClose:()=>N(!1)})]})}},9946:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var s=r(2115);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),i=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,a)=>{let{color:r="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:a,...o,width:t,height:t,stroke:r,strokeWidth:i?24*Number(l)/Number(t):l,className:n("lucide",d),...u},[...m.map(e=>{let[a,r]=e;return(0,s.createElement)(a,r)}),...Array.isArray(c)?c:[c]])}),c=(e,a)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,s.createElement)(d,{ref:l,iconNode:a,className:n("lucide-".concat(t(i(e))),"lucide-".concat(e),o),...c})});return r.displayName=i(e),r}}},e=>{var a=a=>e(e.s=a);e.O(0,[7540,7652,7244,4105,6766,129,6720,8441,1684,7358],()=>a(6812)),_N_E=e.O()}]);