(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{3775:(e,s,a)=>{Promise.resolve().then(a.bind(a,4854))},4854:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(5155),l=a(2115),r=a(7652),i=a(5695),n=a(4105),d=a(760),c=a(3717),o=a(2525),x=a(4616);function m(e){let{onClose:s,onSave:a,initialAddress:i,mode:d}=e,c=(0,r.c3)("addresses"),[o,x]=(0,l.useState)({title:(null==i?void 0:i.title)||"",country_id:(null==i?void 0:i.country_id)||1,city:(null==i?void 0:i.city)||"",address_line:(null==i?void 0:i.address_line)||""}),[m,u]=(0,l.useState)([]),[h,y]=(0,l.useState)({});(0,l.useEffect)(()=>{(async()=>{try{u([{id:1,name:"Jordan"},{id:2,name:"United States"}])}catch(e){console.error("Error fetching countries:",e)}})()},[]);let p=e=>{x({...o,[e.target.name]:e.target.value}),y({...h,[e.target.name]:""})},g=()=>{let e={};return o.title||(e.title=c("titleRequired")),o.country_id||(e.country_id=c("countryRequired")),o.city||(e.city=c("cityRequired")),o.address_line||(e.address_line=c("addressLineRequired")),y(e),0===Object.keys(e).length};return(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-green-700",children:"add"===d?c("addAddress"):c("editAddress")}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g()&&a(o,d)},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-gray-700 mb-1",children:c("title")}),(0,t.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:p,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-700",placeholder:c("titlePlaceholder")}),h.title&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:h.title})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"country_id",className:"block text-gray-700 mb-1",children:c("country")}),(0,t.jsx)("select",{id:"country_id",name:"country_id",value:o.country_id,onChange:p,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-700 bg-gray-100 cursor-not-allowed",disabled:!0,children:m.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))}),h.country_id&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:h.country_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"city",className:"block text-gray-700 mb-1",children:c("city")}),(0,t.jsx)("input",{type:"text",id:"city",name:"city",value:o.city,onChange:p,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-700",placeholder:c("cityPlaceholder")}),h.city&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:h.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"address_line",className:"block text-gray-700 mb-1",children:c("addressLine")}),(0,t.jsx)("input",{type:"text",id:"address_line",name:"address_line",value:o.address_line,onChange:p,className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-700",placeholder:c("addressLinePlaceholder")}),h.address_line&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:h.address_line})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.P.button,{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 rounded-md",whileHover:{scale:1.05},whileTap:{scale:.95},children:c("cancel")}),(0,t.jsx)(n.P.button,{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded-md hover:bg-green-800",whileHover:{scale:1.05},whileTap:{scale:.95},children:"add"===d?c("save"):c("update")})]})]})]})}function u(e){let{count:s=2}=e;return(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:s}).map((e,s)=>(0,t.jsx)("div",{className:"bg-green-100 rounded-lg p-4 shadow-sm animate-pulse",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full bg-gray-300"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-5 w-32 bg-gray-300 rounded"}),(0,t.jsx)("div",{className:"h-4 w-48 bg-gray-300 rounded"}),(0,t.jsx)("div",{className:"h-4 w-48 bg-gray-300 rounded"})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)("div",{className:"h-8 w-16 bg-gray-300 rounded-md"}),(0,t.jsx)("div",{className:"h-8 w-16 bg-gray-300 rounded-md"})]})]})},s))})}function h(e){let{isOpen:s,onConfirm:a,onCancel:l,title:i,message:c,confirmText:o,cancelText:x}=e,m=(0,r.c3)("addresses");return(0,t.jsx)(d.N,{children:s&&(0,t.jsx)(n.P.div,{className:"fixed inset-0  bg-opacity-50 flex items-center justify-center z-50",style:{backdropFilter:"blur(0.8px)"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,t.jsxs)(n.P.div,{className:"bg-[var(--primary-bg)] rounded-lg p-6 max-w-md w-full mx-4 shadow-[var(--shadow-md)]",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2},children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-[var(--text-primary)] mb-4",children:i||m("confirmDeleteTitle")}),(0,t.jsx)("p",{className:"text-[var(--text-gray)] mb-6",children:c||m("confirmDeleteMessage")}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.P.button,{onClick:l,className:"px-4 py-2 border border-[var(--secondary-bg)] text-[var(--text-primary)] rounded-lg hover:bg-[var(--secondary-bg)] transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:x||m("confirmDeleteCancel")}),(0,t.jsx)(n.P.button,{onClick:a,className:"px-4 py-2 bg-[var(--accent-color)] text-[var(--text-white)] rounded-lg hover:bg-[var(--footer-accent)] transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:o||m("confirmDeleteConfirm")})]})]})})})}var y=a(3032),p=a(6720);function g(){let e;let s=(0,r.c3)("addresses"),a=(0,i.usePathname)(),g=(0,i.useRouter)(),f="en"===a.split("/")[1]?"en":"ar",[b,j]=(0,l.useState)([]),[v,N]=(0,l.useState)(!1),[w,_]=(0,l.useState)(null),[P,C]=(0,l.useState)("add"),[S,k]=(0,l.useState)(!1),[E,A]=(0,l.useState)(""),[T,H]=(0,l.useState)(!0),[D,F]=(0,l.useState)(!1),[R,q]=(0,l.useState)(null);(0,l.useEffect)(()=>{let a=localStorage.getItem("token"),t=localStorage.getItem("userId");if(e=a&&t,!a||!t){g.push("/".concat(f,"/login?redirect=/address"));return}(async()=>{try{H(!0);let e=await (0,p.ls)();j(e)}catch(e){console.error("Error fetching addresses:",e),A(s("fetchError")),k(!0)}finally{H(!1)}})()},[e,f,g,s]);let z=async e=>{try{await (0,p.y_)(e),j(b.map(s=>({...s,is_default:s.id===e}))),A(s("defaultSet")),k(!0)}catch(e){console.error("Error setting default address:",e),A(s("defaultSetError")),k(!0)}},O=e=>{_(e),C("edit"),N(!0)},I=async e=>{try{await (0,p.ab)(e),j(b.filter(s=>s.id!==e)),A(s("addressDeleted")),k(!0)}catch(e){A(e instanceof Error?e.message:s("deleteError")),k(!0)}},L=e=>{q(e),F(!0)},U=async()=>{null!==R&&(await I(R),F(!1),q(null))},M=async(e,a)=>{try{if("add"===a){let a=await (0,p.E1)(e);j([...b,a]),A(s("addressAdded"))}else if(w){let a=await (0,p.yU)(w.id,e);j(b.map(e=>e.id===w.id?a:e)),A(s("addressUpdated"))}N(!1),_(null),C("add"),k(!0)}catch(e){A(e instanceof Error?e.message:s("saveError")),k(!0)}};return T?(0,t.jsx)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:[(0,t.jsx)("div",{className:"h-8 w-48 bg-gray-300 rounded animate-pulse mb-6"}),(0,t.jsx)(u,{})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col",dir:"ar"===f?"rtl":"ltr",children:[(0,t.jsx)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:(0,t.jsxs)(n.P.div,{className:"w-full max-w-3xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:[(0,t.jsx)(n.P.h1,{className:"text-2xl font-semibold text-green-700 mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:s("title")}),0===b.length?(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:s("noAddresses")}):(0,t.jsx)("div",{className:"space-y-4 mb-6",children:(0,t.jsx)(d.N,{children:b.map((e,a)=>(0,t.jsx)(n.P.div,{className:"bg-green-100 rounded-lg p-4 shadow-sm",initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.4,0,.2,1],delay:.05*a},layout:!0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.P.button,{className:"w-6 h-6 flex items-center justify-center",onClick:()=>z(e.id),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:e.is_default?(0,t.jsx)(n.P.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full border-2 border-green-700 flex items-center justify-center",children:(0,t.jsx)(n.P.div,{className:"w-2.5 h-2.5 bg-green-700 rounded-full",initial:{scale:0},animate:{scale:1},transition:{delay:.1,ease:[.4,0,.2,1]}})}):(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-green-700",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.city,", ",e.country_name||e.country_id]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.address_line})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsxs)(n.P.button,{className:"text-green-700 hover:text-green-800 hover:bg-green-200 px-3 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>O(e),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,t.jsx)("span",{className:"inline-flex",children:s("edit")}),(0,t.jsx)(c.A,{size:16,className:"ms-1"})]}),(0,t.jsxs)(n.P.button,{className:"text-red-700 hover:text-red-800 hover:bg-red-200 px-3 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>L(e.id),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,t.jsx)("span",{className:"inline-flex",children:s("delete")}),(0,t.jsx)(o.A,{size:16,className:"ms-1"})]})]})]})},e.id))})}),(0,t.jsxs)(n.P.button,{className:"flex flex-row items-center gap-2 text-green-700 hover:text-green-800 hover:bg-green-200 px-3 py-1 rounded-md whitespace-nowrap mb-6",onClick:()=>{_(null),C("add"),N(!0)},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,t.jsx)("span",{className:"inline-flex",children:s("addAddress")}),(0,t.jsx)(x.A,{size:18,className:"ms-1"})]}),v&&(0,t.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,t.jsx)(m,{onClose:()=>N(!1),onSave:M,initialAddress:w,mode:P,setMode:C})})]})}),(0,t.jsx)(y.A,{message:E,isVisible:S,onClose:()=>k(!1)}),(0,t.jsx)(h,{isOpen:D,onConfirm:U,onCancel:()=>{F(!1),q(null)}})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[7652,4105,6720,5204,8441,1684,7358],()=>s(3775)),_N_E=e.O()}]);