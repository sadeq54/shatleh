(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7721],{1586:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5599:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>p});var s=a(5155),t=a(2115),l=a(7652),i=a(5695),d=a(4105),n=a(760),c=a(1586),o=a(3717),x=a(2525),u=a(4616),m=a(3032);function p(){let e=(0,l.c3)("payments"),r="en"===(0,i.usePathname)().split("/")[1]?"en":"ar",[a,p]=(0,t.useState)("pay1");console.log("Selected payment:",a);let[h,v]=(0,t.useState)(!1),[y,f]=(0,t.useState)(null),[b,g]=(0,t.useState)(""),[N,j]=(0,t.useState)("add"),[w,D]=(0,t.useState)(!1),[H,C]=(0,t.useState)(""),[P,k]=(0,t.useState)({}),[S,A]=(0,t.useState)([{id:"pay1",cardNumber:"4242 4242 4242 4242",cardHolder:"John Doe",expiryDate:"12/25",isDefault:!0},{id:"pay2",cardNumber:"5555 5555 5555 4444",cardHolder:"John Doe",expiryDate:"06/24"}]),T=(0,t.useRef)(null),_=(0,t.useRef)(null),z=(0,t.useRef)(null),R=(0,t.useRef)(null),E=e=>e.replace(/\D/g,"").slice(0,16).replace(/(\d{4})(?=\d)/g,"$1 ").trim(),L=e=>{let r=e.replace(/\D/g,"").slice(0,4);return r.length<=2?r:"".concat(r.slice(0,2),"/").concat(r.slice(2,4))},M=e=>{let{name:r,value:a}=e.target,s=a;if("cardNumber"===r)s=E(a);else if("expiryDate"===r)s=L(a);else if("cvv"===r){g(s=a.replace(/\D/g,"").slice(0,4)),k(e=>({...e,cvv:void 0}));return}f(e=>({...e||{id:"",cardNumber:"",cardHolder:"",expiryDate:"",isDefault:!1},[r]:s})),k(e=>({...e,[r]:void 0}))},$=(r,a)=>{let s={};if(/^\d{4} \d{4} \d{4} \d{4}$/.test(r.cardNumber)||(s.cardNumber=e("errors.invalidCardNumber")),r.cardHolder.trim()||(s.cardHolder=e("errors.cardHolderRequired")),/^(0[1-9]|1[0-2])\/([2-9][0-9])$/.test(r.expiryDate)){let[a,t]=r.expiryDate.split("/").map(Number),l=2e3+t,i=new Date,d=i.getFullYear(),n=i.getMonth()+1;(l<d||l===d&&a<n)&&(s.expiryDate=e("errors.expiredCard"))}else s.expiryDate=e("errors.invalidExpiryDate");return/^\d{3,4}$/.test(a)||(s.cvv=e("errors.invalidCvv")),s},O=r=>{p(r),A(S.map(e=>({...e,isDefault:e.id===r}))),C(e("defaultSet")),D(!0)},Y=e=>{f(e),g(""),j("edit"),v(!0),k({})},J=r=>{var a;if(S.length<=1){C(e("cannotDeleteLast")),D(!0);return}let s=S.filter(e=>e.id!==r);(null===(a=S.find(e=>e.id===r))||void 0===a?void 0:a.isDefault)&&(s[0].isDefault=!0,p(s[0].id)),A(s),C(e("paymentDeleted")),D(!0)},q=e=>{if(!e)return"•••• •••• •••• ••••";let r=e.replace(/\D/g,"");return r.length<=4?r:"•••• •••• •••• ".concat(r.slice(-4))};return(0,s.jsxs)("div",{className:"min-h-screen bg-[var(--primary-bg)] flex flex-col",children:[(0,s.jsx)("div",{className:"max-w-3xl mx-auto w-full px-4 md:px-8 py-[7vh]",children:(0,s.jsxs)(d.P.div,{className:"w-full max-w-3xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:[(0,s.jsx)(d.P.h1,{className:"text-2xl font-semibold text-green-700 mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:e("paymentMethods")}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:(0,s.jsx)(n.N,{children:S.map((a,t)=>(0,s.jsx)(d.P.div,{className:"bg-green-100 rounded-lg p-4 shadow-sm",initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.4,0,.2,1],delay:.05*t},layout:!0,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.P.button,{className:"w-6 h-6 flex items-center justify-center",onClick:()=>O(a.id),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:a.isDefault?(0,s.jsx)(d.P.div,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 rounded-full border-2 border-green-700 flex items-center justify-center",children:(0,s.jsx)(d.P.div,{className:"w-2.5 h-2.5 bg-green-700 rounded-full",initial:{scale:0},animate:{scale:1},transition:{delay:.1,ease:[.4,0,.2,1]}})}):(0,s.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"text-green-700",size:20}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-green-700",children:q(a.cardNumber)}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[a.cardHolder," • ",e("expiryDate")," ",a.expiryDate,a.isDefault&&(0,s.jsx)("span",{className:"ml-2 text-xs bg-green-200 text-green-800 px-2 py-0.5 rounded-full",children:e("default")})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsxs)(d.P.button,{className:"text-green-700 hover:text-green-800 hover:bg-green-200 px-3 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>Y(a),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,s.jsx)("span",{className:"inline-flex",children:e("edit")}),(0,s.jsx)(o.A,{size:16,className:"ar"===r?"me-1":"ms-1"})]}),(0,s.jsxs)(d.P.button,{className:"text-red-700 hover:text-red-800 hover:bg-red-200 px-3 py-1 rounded-md flex flex-row items-center whitespace-nowrap",onClick:()=>J(a.id),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,s.jsx)("span",{className:"inline-flex",children:e("delete")}),(0,s.jsx)(x.A,{size:16,className:"ar"===r?"me-1":"ms-1"})]})]})]})},a.id))})}),(0,s.jsxs)(d.P.button,{className:"flex flex-row items-center gap-2 text-green-700 hover:text-green-800 hover:bg-green-200 px-3 py-1 rounded-md whitespace-nowrap mb-6",onClick:()=>{f(null),g(""),j("add"),v(!0),k({})},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:[(0,s.jsx)("span",{className:"inline-flex",children:e("addPayment")}),(0,s.jsx)(u.A,{size:18,className:"ar"===r?"me-1":"ms-1"})]}),h&&(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"add"===N?e("addPayment"):e("editPayment")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",name:"cardNumber",placeholder:e("cardNumber"),value:(null==y?void 0:y.cardNumber)||"",onChange:M,className:"w-full rounded-md border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(P.cardNumber?"border-red-500":"border-gray-300"),maxLength:19,"aria-invalid":!!P.cardNumber,"aria-describedby":P.cardNumber?"cardNumber-error":void 0,ref:T}),P.cardNumber&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",id:"cardNumber-error",children:P.cardNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",name:"cardHolder",placeholder:e("cardHolder"),value:(null==y?void 0:y.cardHolder)||"",onChange:M,className:"w-full rounded-md border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(P.cardHolder?"border-red-500":"border-gray-300"),"aria-invalid":!!P.cardHolder,"aria-describedby":P.cardHolder?"cardHolder-error":void 0,ref:_}),P.cardHolder&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",id:"cardHolder-error",children:P.cardHolder})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",name:"expiryDate",placeholder:"MM/YY",value:(null==y?void 0:y.expiryDate)||"",onChange:M,className:"w-full rounded-md border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(P.expiryDate?"border-red-500":"border-gray-300"),maxLength:7,"aria-invalid":!!P.expiryDate,"aria-describedby":P.expiryDate?"expiryDate-error":void 0,ref:z}),P.expiryDate&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",id:"expiryDate-error",children:P.expiryDate})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",name:"cvv",placeholder:e("cvv"),value:b,onChange:M,className:"w-full rounded-md border px-4 py-3 text-sm focus:outline-none focus:ring-2 transition-colors ".concat(P.cvv?"border-red-500":"border-gray-300"),maxLength:4,"aria-invalid":!!P.cvv,"aria-describedby":P.cvv?"cvv-error":void 0,ref:R}),P.cvv&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",id:"cvv-error",children:P.cvv})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(d.P.button,{className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-md",onClick:()=>{v(!1),k({}),g("")},whileHover:{scale:1.03},whileTap:{scale:.97},children:e("cancel")}),(0,s.jsx)(d.P.button,{className:"px-4 py-2 bg-green-700 text-white hover:bg-green-800 rounded-md",onClick:()=>{if(!y)return;let r=$(y,b);if(Object.keys(r).length>0){var a,s,t,l;k(r),r.cardNumber?null===(a=T.current)||void 0===a||a.focus():r.cardHolder?null===(s=_.current)||void 0===s||s.focus():r.expiryDate?null===(t=z.current)||void 0===t||t.focus():r.cvv&&(null===(l=R.current)||void 0===l||l.focus());return}"add"===N?(A([...S,{...y,id:"pay".concat(S.length+1),isDefault:0===S.length}]),C(e("paymentAdded"))):(A(S.map(e=>e.id===y.id?{...y,isDefault:e.isDefault}:e)),C(e("paymentUpdated"))),v(!1),f(null),g(""),j("add"),D(!0)},whileHover:{scale:1.03},whileTap:{scale:.97},children:"add"===N?e("add"):e("save")})]})]})]})}),(0,s.jsx)(m.A,{message:H,isVisible:w,onClose:()=>D(!1)})]})}},7040:(e,r,a)=>{Promise.resolve().then(a.bind(a,5599))}},e=>{var r=r=>e(e.s=r);e.O(0,[7652,4105,5204,8441,1684,7358],()=>r(7040)),_N_E=e.O()}]);