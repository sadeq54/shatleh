(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5230],{2108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},2138:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2287:(e,t,s)=>{Promise.resolve().then(s.bind(s,9243))},6255:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(5155),r=s(6766),l=s(6874),i=s.n(l),c=s(4105),o=s(2108),n=s(2138),d=s(7652),m=s(2115),h=s(6720),u=s(5695);function x(e){let{post:t,currentLocale:s,setPosts:l,pageName:x}=e,p=(0,d.c3)(),f=(0,u.useRouter)(),g="ar"===s?t.title_ar:t.title_en,b="ar"===s?t.content_ar:t.content_en,v="ar"===s?t.category_ar:t.category_en,[j,y]=(0,m.useState)(!1),w=async e=>{if(e.preventDefault(),e.stopPropagation(),!j){y(!0);try{let e=await (0,h.dC)(t.id);l&&l(s=>s.map(s=>s.id===t.id?{...s,bookmarked:e}:s))}catch(e){e instanceof Error&&(e.message.includes("Authentication required")||e.message.includes("No authentication token found"))?f.push("/".concat(s,"/login?redirect=/").concat(x)):console.error("Bookmark error:",e)}finally{y(!1)}}};return(0,a.jsx)(i(),{href:"/".concat(s,"/blog/").concat(t.id),scroll:!0,children:(0,a.jsxs)(c.P.div,{id:"blog-post-".concat(t.id),className:"bg-white rounded-xl overflow-hidden shadow-md border border-gray-200 relative",whileHover:{scale:1.05,boxShadow:"0 10px 20px rgba(0,0,0,0.2)"},transition:{duration:.3},dir:"ar"===s?"rtl":"ltr",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.default,{src:t.image||"/7.svg",width:400,height:300,alt:g,className:"w-full h-56 object-cover"}),(0,a.jsx)(c.P.button,{onClick:w,disabled:j,className:"absolute top-2 ".concat("ar"===s?"left-2":"right-2"," p-2 rounded-full ").concat(t.bookmarked?"bg-teal-600 text-white":"bg-white text-teal-600"," hover:bg-teal-600 hover:text-white transition-colors shadow-sm"),"aria-label":t.bookmarked?p("education.removeBookmark",{default:"Remove from Bookmarks"}):p("education.addBookmark",{default:"Add to Bookmarks"}),variants:{idle:{scale:1,rotate:0},clicked:{scale:[1,1.2,.9,1],rotate:[0,5,-5,0],transition:{duration:.3,ease:"easeInOut"}}},initial:"idle",animate:j?"clicked":"idle",whileHover:{scale:1.1},transition:{type:"spring",stiffness:300,damping:20},children:(0,a.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 min-h-[200px] flex flex-col justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-teal-600 mb-2",children:g}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4 line-clamp-3",children:b}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-teal-600 bg-teal-100 px-2 py-1 rounded-full",children:v}),(0,a.jsxs)("div",{className:"text-sm text-teal-600 flex items-center font-medium",children:[p("home.readMore",{default:"Read more"}),(0,a.jsx)(n.A,{className:"w-4 h-4 ".concat("ar"===s?"mr-1":"ml-1")})]})]})]})]})})}},6474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7809:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},7924:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8564:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),r=s(2115),l=s(7652),i=s(5695),c=s(4105),o=s(6474),n=s(7924),d=s(6720),m=s(6255),h=s(6766),u=s(6874),x=s.n(u);let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?e:e.substring(0,t-3)+"..."},f=function(e){let{service:t,index:s}=e,r=(0,i.usePathname)().split("/")[1]||"ar",l=p("ar"===r?t.description_ar:t.description_en,100);return(0,a.jsx)(x(),{href:"/".concat(r,"/services/").concat(t.id),passHref:!0,children:(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*s,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"},className:"bg-[#337a5b] rounded-xl p-4 text-white flex flex-col justify-between h-full w-[280px] relative cursor-pointer","aria-label":"ar"===r?t.name_ar:t.name_en,children:[(0,a.jsx)("div",{className:"mb-4 flex justify-center items-center rounded-lg h-[270px] w-full relative",children:(0,a.jsx)(h.default,{src:"http://127.0.0.1:8000"+t.image,alt:"ar"===r?t.name_ar:t.name_en,width:300,height:270,className:"object-cover rounded-lg w-full h-full"})}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"font-medium text-center mb-1 text-white",children:"ar"===r?t.name_ar:t.name_en}),(0,a.jsx)("p",{className:"text-xs text-center mb-2 flex-grow text-white overflow-hidden overflow-ellipsis whitespace-nowrap",children:l})]})]})})};var g=s(82);function b(){var e;let t=(0,l.c3)("search"),s=(0,i.usePathname)(),h=(0,i.useSearchParams)(),u=s.split("/")[1]||"en",[p,b]=(0,r.useState)("all"),[v,j]=(0,r.useState)({products:[],posts:[],services:[]}),[y,w]=(0,r.useState)(!0),[N,k]=(0,r.useState)(""),[A,_]=(0,r.useState)(!1),S=(0,r.useRef)(null),[P,E]=(0,r.useState)(""),[R,C]=(0,r.useState)([]),[q,B]=(0,r.useState)(!1);(0,r.useEffect)(()=>{B(!!(0,d.c4)())},[]),(0,r.useEffect)(()=>{let e=h.get("q")||"",t=localStorage.getItem("searchQuery")||"";E(e||t),e&&e!==t&&localStorage.setItem("searchQuery",e)},[h]),(0,r.useEffect)(()=>{(async()=>{if(!P){j({products:[],posts:[],services:[]}),w(!1);return}w(!0),k("");try{let e=await (0,d.$P)(P,p);console.log("Search API response:",e);let t=e.data.posts;if(q){let s=await (0,d.l4)(),a=new Set(s.map(e=>e.id));t=e.data.posts.map(e=>({...e,bookmarked:a.has(e.id)}))}j({...e.data,posts:t}),C(t)}catch(e){k(t("error")),console.error("Search error:",e)}finally{w(!1)}})()},[P,p,t,q]),(0,r.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&_(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let z=e=>{b(e),_(!1)},H=[{id:"all",label:t("all")},{id:"products",label:t("products")},{id:"posts",label:t("posts")},{id:"services",label:t("services")}];return console.log("Content types:",H),console.log("Current results:",v),console.log("Current query:",P),(0,a.jsxs)("main",{className:"min-h-screen mx-auto px-4 py-10 max-w-7xl",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:t("title",{query:P})}),(0,a.jsxs)("div",{className:"relative mb-6",ref:S,children:[(0,a.jsxs)("button",{onClick:()=>_(!A),className:"flex items-center justify-between gap-2 px-4 py-2 bg-white border border-[#80ce97] rounded-md text-[#0f4229] min-w-[150px]","aria-expanded":A,"aria-label":t("filter"),children:[(0,a.jsx)("span",{children:(null===(e=H.find(e=>e.id===p))||void 0===e?void 0:e.label)||t("all")}),(0,a.jsx)(o.A,{className:"h-4 w-4"})]}),A&&(0,a.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full ".concat("ar"===u?"right-0":"left-0"," mt-1 bg-white border border-[#80ce97] rounded-md shadow-lg z-10 min-w-[150px]"),role:"menu","aria-label":t("filterOptions"),children:(0,a.jsx)("div",{className:"p-2 space-y-2",children:H.map(e=>(0,a.jsx)("button",{onClick:()=>z(e.id),className:"w-full ".concat("ar"===u?"text-right":"text-left"," px-4 py-2 hover:bg-gray-100 text-[#414141]"),children:e.label},e.id))})})]}),y?(0,a.jsx)("p",{children:t("loading")}):N?(0,a.jsx)("p",{className:"text-red-500",children:N}):0===v.products.length&&0===v.posts.length&&0===v.services.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center",children:[(0,a.jsx)(n.A,{className:"h-16 w-16 text-[#80ce97] mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-[#0f4229] mb-2",children:t("noResultsTitle",{default:"No Results Found"})}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:t("noResultsMessage",{default:"Sorry, we couldnâ€™t find any results for your search query. Try a different search term or check out our categories."})}),(0,a.jsx)(x(),{href:"/".concat(u),className:"px-4 py-2 bg-[#337a5b] text-white rounded-md hover:bg-[#2a634a] transition-colors",children:t("goBack",{default:"Go Back"})})]}):(0,a.jsxs)("div",{children:[("all"===p||"products"===p)&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t("products")}),v.products.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3  gap-6",children:v.products.map((e,t)=>(0,a.jsx)(g.A,{product:{...e,image:Array.isArray(e.image)?e.image:[e.image]},index:t,pageName:"search"},e.id))}):(0,a.jsx)("p",{children:t("noResults")})]}),("all"===p||"posts"===p)&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t("posts")}),R.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3  gap-6",children:R.map(e=>(0,a.jsx)(m.A,{post:e,currentLocale:u,setPosts:C,pageName:"search"},e.id))}):(0,a.jsx)("p",{children:t("noResults")})]}),("all"===p||"services"===p)&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t("services")}),v.services.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3  gap-6",children:v.services.map((e,t)=>(0,a.jsx)(f,{service:e,index:t},e.id))}):(0,a.jsx)("p",{children:t("noResults")})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,7244,4105,6766,5950,6720,82,8441,1684,7358],()=>t(2287)),_N_E=e.O()}]);